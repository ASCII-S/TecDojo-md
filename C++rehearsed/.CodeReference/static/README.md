# Static 关键字代码练习指南

## 概述

这个目录包含了C++中static关键字各种用法的代码练习文件。每个文件都设计为引导式学习，通过完成TODO任务来理解static关键字的不同应用场景。

## 文件列表

### 1. `global_static_demo.cpp` - 全局静态变量

- **学习目标**: 理解static修饰全局变量的作用
- **预计时间**: 5-8分钟
- **重点概念**: 文件作用域、内部链接性、隐藏性

### 2. `local_static_demo.cpp` - 局部静态变量  
- **学习目标**: 理解static修饰局部变量的内存行为
- **预计时间**: 8-10分钟
- **重点概念**: 静态存储期、记忆功能、初始化时机

### 3. `static_function_demo.cpp` - 静态函数
- **学习目标**: 理解static修饰函数的可见性
- **预计时间**: 5-7分钟
- **重点概念**: 函数链接性、封装性、模块化

### 4. `class_static_demo.cpp` - 类静态成员
- **学习目标**: 理解类的静态成员变量和函数
- **预计时间**: 10-12分钟
- **重点概念**: 共享性、类关联、单例模式

### 5. `static_comprehensive_demo.cpp` - 综合示例
- **学习目标**: 综合运用所有static用法
- **预计时间**: 12-15分钟
- **重点概念**: 实际应用场景、设计模式

### 6. `external_test.cpp` - 多文件测试
- **学习目标**: 验证static的链接特性
- **预计时间**: 5分钟
- **重点概念**: 链接器行为、符号可见性

## 使用方法

### 步骤1: 选择文件开始练习

建议按以下顺序学习：

1. [`global_static_demo.cpp`](global_static_demo.cpp) (基础)
2. [`local_static_demo.cpp`](local_static_demo.cpp) (重要)  
3. [`static_function_demo.cpp`](static_function_demo.cpp) (简单)
4. [`class_static_demo.cpp`](class_static_demo.cpp) (核心)
5. [`static_comprehensive_demo.cpp`](static_comprehensive_demo.cpp) (综合)
6. [`external_test.cpp`](external_test.cpp) (验证)

### 步骤2: 阅读并完成TODO任务

每个文件都包含详细的TODO注释，按顺序完成即可：

- 仔细阅读注释说明
- 根据要求实现代码
- 编译运行观察结果
- 思考文末的问题

### 步骤3: 编译和运行

```bash
# 编译单个文件
g++ -o demo global_static_demo.cpp
./demo

# 编译时启用调试信息
g++ -g -o demo local_static_demo.cpp
./demo
```

### 步骤4: 实验和验证

```bash
# 测试多文件链接
g++ -c global_static_demo.cpp
g++ -c static_function_demo.cpp  
g++ -c external_test.cpp
g++ *.o -o multi_file_test
```

## 重要提示

### 编程建议

- 完成每个TODO后立即编译测试
- 不要跳过思考问题，它们很重要
- 尝试修改代码观察不同的行为
- 使用调试器观察内存布局

### 常见错误
1. **忘记定义类的静态成员变量**
   ```cpp
   // 错误：只有声明，没有定义
   class Test { static int count; };
   
   // 正确：需要在类外定义
   int Test::count = 0;
   ```

2. **在静态成员函数中访问非静态成员**
   ```cpp
   // 错误：静态函数无法访问非静态成员
   static void func() { cout << member_var; }
   ```

3. **混淆作用域和生命周期**
   - 静态局部变量：局部作用域，全局生命周期
   - 全局静态变量：文件作用域，全局生命周期

### 调试技巧
- 使用`objdump -t`查看符号表
- 使用`nm`命令检查符号类型
- 使用地址打印观察内存位置
- 使用多线程测试观察并发行为

## 扩展练习

完成基础练习后，可以尝试：

1. **实现一个日志系统**：使用静态成员实现单例日志记录器

2. **对象计数器**：为任意类添加对象计数功能

3. **缓存系统**：使用静态局部变量实现函数级缓存

4. **工厂模式**：使用静态成员函数实现对象工厂

5. **线程安全测试**：在多线程环境中测试静态变量

## 面试重点

以下是基于这些练习的常见面试问题：

### 基础概念
- static关键字的不同用法有哪些？
- 静态变量存储在内存的哪个区域？
- 静态变量的初始化时机是什么时候？

### 深入理解  
- 为什么静态成员函数不能访问非静态成员？
- 类的静态成员变量为什么必须在类外定义？  
- static关键字如何影响符号的链接性？

### 实际应用
- 什么时候使用静态局部变量？
- 如何用静态成员实现单例模式？
- 静态变量在多线程环境下有什么问题？

## 总结

通过完成这些练习，你将全面掌握C++中static关键字的各种用法，理解其在内存管理、作用域控制、设计模式等方面的应用。这些知识对于C++面试和实际开发都非常重要。

记住：**理解概念 → 动手实践 → 思考应用 → 面试准备** 