---
jupytext:
  formats: "md:markdown,ipynb/C++primer/04-\u8868\u8FBE\u5F0F.ipynb:notebook"
  text_representation:
    extension: .md
    format_name: markdown
    format_version: '1.3'
    jupytext_version: 1.13.8
kernelspec:
  display_name: C++
  language: C++
  name: xcpp
language_info:
  codemirror_mode: text/x-c++src
  file_extension: .cpp
  mimetype: text/x-c++src
  name: c++
  version: '11'
---

[[C++ primer]]
---
## 基础
### **左值和右值的区别**
- **左值**：代表一个对象或者内存中的某个位置，能够通过其**地址**来引用和修改。它可以出现在赋值语句的左边和右边。
- **右值**：通常是一个**临时**的值，不能引用内存中的某个持久位置。右值只能出现在赋值语句的右边，不能对右值进行赋值。
### 求值顺序
**1. 优先级（Precedence）**
优先级决定的是在表达式中，操作符和操作数如何组合，也就是“**哪些运算符优先结合哪些操作数**”。优先级高的运算符会先和它周围的操作数结合。比如在表达式 `**a + b * c**` 中，乘法 `*****` 的优先级高于加法 `**+**`，所以 `**b * c**` 先被计算，然后加法 `**a + (b * c)**`。

```
cpp
复制代码
int result = 2 + 3 * 4;// 等价于 2 + (3 * 4)
```

**2. 结合性（Associativity）**
结合性决定的是**当多个相同优先级的运算符出现在同一表达式中时，它们是从左往右还是从右往左结合**。例如：
- **左结合性**：加法、减法、乘法等运算符是左结合的，也就是说从左往右求值。
    
    ```C++
    cpp
    复制代码
    int result = 10 - 2 - 3;// 等价于 (10 - 2) - 3
    ```
    
- **右结合性**：赋值运算符是右结合的，也就是说从右往左结合。
    
    ```C++
    cpp
    复制代码
    int a, b, c;
    a = b = c = 5;// 等价于 a = (b = (c = 5))
    ```
    
**3. 求值顺序（Evaluation Order）**
优先级和结合性**不**决定表达式的实际求值顺序。在很多表达式中，操作数和运算符的**求值顺序是未定义的**，也就是说编译器可以自由选择按什么顺序求值。
**示例：**

```
cpp
复制代码
int x = 1;
int y = ++x + x++;// 求值顺序未定义
```

在这个例子中，`**++x**` 和 `**x++**` 的求值顺序**未定义**，因为 `**x**` 在同一个表达式中被多次修改 (`**x++**` 和 `**++x**`)，且**两次修改之间没有序列点（sequence point）**来明确求值顺序。
这意味着不同的编译器或者不同的编译设置可能会产生不同的结果。它并没有规定是先对 `**++x**` 求值还是对 `**x++**` 求值。
## 逻辑运算符
### **短路求值**
- **逻辑与 (**`**&&**` **或** `**and**`**)**：如果左侧的表达式为 `**false**`，整个表达式的结果已经确定为 `**false**`，因此右侧表达式不会被求值。
- **逻辑或 (**`**||**` **或** `**or**`**)**：如果左侧的表达式为 `**true**`，整个表达式的结果已经确定为 `**true**`，因此右侧表达式不会被求值。
## 赋值运算符
### 复合赋值运算符
复合赋值运算符（如 `**+=**`）**通常比普通的赋值表达式更高效**，因为它可以直接在变量的内存位置上进行操作，而无需创建临时变量或做额外的拷贝。
## 递增运算符
### **混用解引用和递增运算符**
由于**递增运算符优先级高于解引用运算符**
- **后置递增**（*`**ptr++**`）：等价于 *`**(ptr++)**`，即先解引用指针再递增。
## 成员访问运算符
### **运算对象可以按照任意顺序求值**
在 C++ 中，**运算对象可以按照任意顺序求值**，这可能会导致某些情况下的**未定义行为**或**不可预测的结果**。这主要是因为 C++ 标准对**运算对象的求值顺序**没有严格规定，而是将其留给编译器来优化。因此，理解运算对象的求值顺序非常重要，特别是在有副作用的表达式中。

```
int x = 10;
int y = (x++) + (++x);
```

• 这里 `**x++**` 和 `**++x**` 在同一个表达式中修改了 `**x**` 的值，而 C++ 对其求值顺序没有定义。因此，这可能会导致**未定义行为**。
---
[[C++ primer]]
