---
jupyter:
  jupytext:
    text_representation:
      extension: .md
      format_name: markdown
      format_version: '1.3'
      jupytext_version: 1.14.4
  kernelspec:
    display_name: C++
    language: c++
    name: xcpp11
---

---
jupyter:
  jupytext:
    cell_metadata_filter: language,-all
    formats: md,ipynb
    main_language: c++
    text_representation:
      extension: .md
      format_name: markdown
      format_version: '1.3'
      jupytext_version: 1.14.7
---

[[第 3 章 字符串,向量和数组]]
在 C 和 C++ 中，复杂的数组定义有时会让人感到困惑，但可以通过以下规则逐步解析。通过遵循从内到外、从右到左的阅读顺序，我们能够清楚地理解数组、指针、函数指针等复杂类型的含义。
以下是解析复杂数组定义的一些步骤和规则：
### 1. 从变量名开始看
无论定义多么复杂，首先找到变量的名字，接着向外扩展，识别数组、指针和其他修饰符。
### 2. 按照从内向外的顺序解读
在 C/C++ 中，复杂声明遵循**从内到外**和**从右到左**的顺序阅读。也就是说，首先理解变量本身是什么类型，再考虑其他修饰符的作用。
### 3. 确定优先级
运算符优先级决定了解析顺序：
- `[]`（下标运算符）优先级高于 （指针运算符）
- `()`（函数运算符）优先级高于
### 示例解析
### 示例 1：简单二维数组


```
int arr[3][4];
```

- `arr` 是一个数组，大小为 3。
- `arr` 的每个元素是一个包含 4 个 `int` 的数组。
- 这个二维数组的大小是 3x4，总共有 12 个 `int`。
### 示例 2：指向数组的指针


```
int (*ptr)[5];
```

- `ptr` 是一个指针（），它指向一个包含 5 个 `int` 的数组（`[5]`）。
- 用语言描述，`ptr` 是一个指向包含 5 个整数的数组的指针。
### 示例 3：指针数组


```
int *arr[10];
```

- `arr` 是一个数组，大小为 10。
- `arr` 的每个元素是一个指向 `int` 的指针。
- 用语言描述，`arr` 是一个包含 10 个 `int` 指针的数组。
### 示例 4：函数返回数组指针


```
int (*func())[4];
```

- `func()` 是一个函数，返回值是一个指向包含 4 个 `int` 的数组的指针。
### 示例 5：函数指针


```
int (*func_ptr)(int, float);
```

- `func_ptr` 是一个指针，指向一个接受 `int` 和 `float` 参数并返回 `int` 的函数。
### 示例 6：多重复杂声明


```
int *(*arr[10])(int, float);
```

- `arr` 是一个数组，大小为 10。
- `arr` 的每个元素是一个指向函数的指针，该函数接受 `int` 和 `float` 参数并返回 `int*`（指向 `int` 的指针）。
### 解析技巧
1. **从变量名开始**：例如，在 `int (*ptr)[5];` 中，先识别 `ptr`。
2. **识别修饰符**：根据 `[]` 或 来理解变量是否是指针或数组。
3. **从内向外解析**：首先理解最内层的修饰符，然后逐步向外扩展。
### 复杂数组声明总结
1. `int arr[3][4];`：一个二维数组，大小为 3x4。
2. `int (*ptr)[5];`：指向一个包含 5 个 `int` 的数组的指针。
3. `int *arr[10];`：一个包含 10 个 `int` 指针的数组。
4. `int (*func())[4];`：返回指向一个包含 4 个 `int` 数组的函数。
5. `int *(*arr[10])(int, float);`：一个包含 10 个指向函数的指针的数组，该函数返回 `int*`。
通过这几步，你应该能够更好地解析和理解复杂的数组或指针声明。
